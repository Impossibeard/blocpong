<!DOCTYPE HTML>
<html>
  <head>
    <style>
      body {
        margin: 0px;
        padding: 0px;
      }
    </style>
  </head> 
  <body>
    <canvas id="pongCanvas" width="600" height="600"></canvas>
    <script>
        
        var animate = window.requestAnimationFrame ||
        window.webkitRequestAnimationFrame ||
        window.mozRequestAnimationFrame    ||
        window.oRequestAnimationFrame      ||
        window.msRequestAnimationFrame     ||
        function(callback) { window.setTimeout(callback, 1000/60) };
        var canvas = document.getElementById('pongCanvas');
        var context = canvas.getContext('2d');
      
        //background fill
        function Background(){};
        
        Background.prototype.render = function(){
        context.beginPath();
        context.rect(0, 0, 600, 600);
        context.fillStyle = '#993399';
        context.fill();
        };
        
        //paddle object constructor
        function Paddle(x, y, width, height, color) {
            this.x = x;
            this.y = y;
            this.width = width;
            this.height = height;
            this.color = color;
            this.speed = 5;
        };
        
        //paddle render
        Paddle.prototype.render = function(){
            context.beginPath();
            context.rect(this.x, this.y, this.width, this.height);
            context.strokeStyle = 'black';
            context.stroke();
            context.fillStyle = this.color;
            context.fill();
        };
        
        //paddle move function
        Paddle.prototype.move = function(direction){
            this.y += this.speed * direction;
            if(this.y < 0) {
                this.y = 0;
            } else if (this.y + this.height > 600) {
                this.y = 600 - this.height;
            }
        };
        
        //player object
        function Player(){}
        Player.prototype = new Paddle(50, 300, 15, 75, "#3366ff");
    
        
        //computer object constructor
        function Computer() {};
        Computer.prototype = new Paddle(535, 300, 15, 75, "#ff0000");
        
        //speed calculations
        var positive_x_speed = Math.floor((Math.random() * 3) + 1);
        var positive_y_speed = Math.floor((Math.random() * 3) + 1);
        var random_x_speed = positive_x_speed * (Math.floor(Math.random()*2) == 1 ? 1 : -1);
        var random_y_speed = positive_y_speed * (Math.floor(Math.random()*2) == 1 ? 1 : -1);

        
        //ball object
        function Ball(x, y) {
            this.x = x;
            this.y = y;
            this.radius = 5;
            this.x_speed = random_x_speed;
            this.y_speed = random_y_speed;
            console.log("Random X speed is " + random_x_speed)
            console.log("Random Y speed is " + random_y_speed)
            console.log("Positive X speed is " + positive_x_speed)
            console.log("Positive Y speed is " + positive_y_speed)
        };
        
        
        //draw ball object
        Ball.prototype.render = function() {
            context.beginPath();
            context.arc(this.x, this.y, this.radius, 2 * Math.PI, false);
            context.fillStyle = "white";
            context.fill();
            context.strokeStyle = 'black';
            context.stroke();
        };
        
        Ball.prototype.move = function() {
            this.x += this.x_speed;
            this.y += this.y_speed;
            
            if (this.y <= 5 || this.y >= 600) {
                this.y_speed *= -1;
            };
        };
        
        //instantiated objects
        var background = new Background();
        var player = new Player();
        var computer = new Computer();
        var ball = new Ball(canvas.width/2, canvas.height/2);
        
        //render all objects
        var renderall = function(){
            background.render();
            player.render();
            computer.render();
            ball.render();
        };
        
        var step = function(){
            renderall();
            ball.move();
            //console.log("Ball is at " + ball.x + ", " + ball.y)
            animate(step);
        };
        
        window.onload = function(){
            renderall();
            animate(step);
        };
        
        window.addEventListener("keydown", function(event) {
            console.log("moving! Player at " + player.x + ", " + player.y);
            console.log(event.key);
            if (event.key === "ArrowUp"){
                player.move(-1);
                console.log("moving up!");
            } else if (event.key === "ArrowDown"){
                player.move(1);
                console.log("moving down!");
            } else {
                player.move(0);
                console.log("staying put!");
            }
        });
        
        
    </script>
  </body>
</html> 